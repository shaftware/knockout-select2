!function(a){"function"==typeof define&&define.amd?define(["jquery","knockout","module"],a):a(jQuery,ko)}(function(a,b,c){"use strict";function d(c,d){var e,f=b.isObservable(d);f&&(e=d.equalityComparer,d.equalityComparer=function(){return!0}),a(c).trigger("change"),f&&(d.equalityComparer=e)}function e(c,e,g,i,j){var k=b.unwrap(e()),l=g(),m=!1,n=null,o=null,p=[];if(void 0!=l.selectedOptions&&void 0!=l.selectedOptions()?p=l.selectedOptions():void 0!=l.value&&void 0!=l.value()&&(p=l.value()),a(c).on("select2:selecting select2:unselecting",function(){m=!0}),a(c).on("select2:select select2:unselect",function(){m=!1}),b.isObservable(l.value)?o=l.value.subscribe(function(a){m||d(c,this._target||this.target)}):b.isObservable(l.selectedOptions)&&(o=l.selectedOptions.subscribe(function(a){m||d(c,this._target||this.target)})),b.isWriteableObservable(l[h])&&(n=function(){a(c).data("select2")&&l[h](a(c).select2("data"))},a(c).on("change",n)),a(c).select2(k),null!=p&&p.length>0){for(var q=[],r=0;r<p.length;r++)q.push(p[r]);var s=f(c);void 0!=s&&i[s](q)}b.utils.domNodeDisposal.addDisposeCallback(c,function(){a(c).select2("destroy"),null!==n&&a(c).off("change",n),null!==o&&o.dispose()})}function f(a){var b=a.attributes["data-bind"].nodeValue,c=b.match(/selectedOptions\s*:\s*(?:{.*,?\s*data\s*:\s*)?([^{},\s]+)/);return c&&c.length?c[1]:void 0}var g="select2";c&&c.config()&&c.config().name&&(g=c.config().name);var h=g+"Data";return b.bindingHandlers[g]={init:function(){var a=arguments;setTimeout(function(){e.apply(null,a)},0)}}});